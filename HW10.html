<!DOCTYPE html>
<html>
<head>
    <title>ANIME API</title>
    <meta charset="utf-8"/>
    <script>
        function getData() {
            //Create XMLHTTP request
            request = new XMLHttpRequest();

            //Set URL for the AJAX request to be the JSON file
            request.open("GET", "https://animechan.vercel.app/api/random", true)

            //Set up event handler/callback
            request.onreadystatechange = function(){
                //if everything prior is done correctly, get data from API
                if (request.readyState == 4 && request.status == 200) {
                    //wait for it to be done
                    console.log("5 received");
                    result = request.responseText;
                    randQuote = JSON.parse(result);

                    document.getElementById("data").innerHTML = "Anime: " + randQuote["anime"] + "<br/>" + "Quote: '" + randQuote["quote"] + "'";
                }
                //error messages to let programmer know there is an error
                else if (request.readyState == 4 && request.status != 200) {
                    document.getElementById("data").innerHTML = "Something is wrong!  Check the logs";
                }
                else if (request.readyState == 3) {
                    document.getElementById("data").innerHTML = "Too soon. Try again";
                }
            }
                //Send HTTP request 
                request.send();
                console.log("4 request sent");
        }
    </script>
    </head>
    
    <body onload = "getData()">
        <h1>Random Anime Quote</h1>
        <div id="data">Loading...</div>
    </body>
</html>